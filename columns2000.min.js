/*
 Columns 2000
 2012 https://github.com/judas-christ/columns2000
 Adapted to jQuery 1.8 from CSS3MultiColumn 1.02 beta, copyright (c) 2005 Cdric Savarese <pro@4213miles.com> licensed under the CC-GNU LGPL <http://creativecommons.org/licenses/LGPL/2.1/>
*/
(function(G,M,f){function F(){this.handlerList=[]}F.prototype.getPseudoCssRules=function(f,i){this.cssRules=[];for(var A=f.replace("-","-")+"[\\s]*:[\\s]*([^;}]*)[;}]",A=RegExp(A,"g"),B=A.exec(i),v=0;B;){var C=i.substr(0,i.substr(0,i.indexOf(B[0])).lastIndexOf("{")),C=C.substr(C.lastIndexOf("}")+1).replace(/^\s*|\s*$/g,"");this.cssRules[v]={};this.cssRules[v].selectorText=C;this.cssRules[v].property=f;this.cssRules[v].value=B[1].replace(/(\r?\n)*/g,"");v++;B=A.exec(i)}};F.prototype.randomId=function(){for(var f="",i=0;6>i;i++)f+=String.fromCharCode(97+Math.floor(24*Math.random()));return f};new function(){function H(d){if(d.href&&d.cssText)return i(d.cssText),(new G.Deferred).resolve().promise();if(d.href){var b=new G.Deferred;G.get(d.href).done(function(a){i(a);b.resolve()});return b.promise()}}function i(d){for(var b=new D.getPseudoCssRules("column-count",d),a=0;b&&a<b.cssRules.length;a++)h[b.cssRules[a].selectorText]||(h[b.cssRules[a].selectorText]={}),h[b.cssRules[a].selectorText]["column-count"]=b.cssRules[a].value;b=new D.getPseudoCssRules("column-width",d);for(a=0;b&&a<b.cssRules.length;a++)h[b.cssRules[a].selectorText]||(h[b.cssRules[a].selectorText]={}),h[b.cssRules[a].selectorText]["column-width"]=b.cssRules[a].value;b=new D.getPseudoCssRules("column-gap",d);for(a=0;b&&a<b.cssRules.length;a++)h[b.cssRules[a].selectorText]||(h[b.cssRules[a].selectorText]={}),h[b.cssRules[a].selectorText]["column-gap"]=b.cssRules[a].value;b=new D.getPseudoCssRules("column-rule",d);for(a=0;b&&a<b.cssRules.length;a++)h[b.cssRules[a].selectorText]||(h[b.cssRules[a].selectorText]={}),h[b.cssRules[a].selectorText]["column-rule"]=b.cssRules[a].value}function A(d,b,a){if(1==d.nodeType){var e=C(d,a),f=e+d.offsetHeight;if(e<b&&f>b){if(s=d,B(d))for(e=0;e<d.childNodes.length;e++)A(d.childNodes[e],b,a)}else f<=b&&f>=J&&(J=f,K=d)}}function B(d){if(d.tagName)for(var d=d.tagName.toUpperCase(),b=0;b<N.length;b++)if(d==N[b])return!0;return!1}function v(d,b,a,e){for(var j=[],c=d.parentNode;c&&c.id!=b.id;)j[j.length]=c,c.id||(c.id=D.randomId()),c=c.parentNode;for(b=j.length-1;0<=b;b--){for(c=0;c<a.childNodes.length&&(3==a.childNodes[c].nodeType||!a.childNodes[c].className.match(j[b].id+"-css3mc"));c++);if(c==a.childNodes.length){if(a="append"==e?a.appendChild(f.createElement(j[b].tagName)):a.insertBefore(f.createElement(j[b].tagName),a.firstChild),a.className=j[b].className+" "+j[b].id+"-css3mc",a.style.marginTop="0",a.style.paddingTop="0","OL"==a.tagName.toUpperCase()&&1==d.nodeType&&"LI"==d.tagName.toUpperCase()){for(var c=d.previousSibling,h=0;c;)1==c.nodeType&&"LI"==c.tagName.toUpperCase()&&h++,c=c.previousSibling;a.setAttribute("start",h)}}else if(a=a.childNodes[c],"OL"==a.tagName.toUpperCase()&&(-1==a.start||1==a.start)&&1==d.nodeType&&"LI"==d.tagName.toUpperCase()){c=d.previousSibling;for(h=0;c;)1==c.nodeType&&"LI"==c.tagName.toUpperCase()&&h++,c=c.previousSibling;a.setAttribute("start",h)}}return a}function C(d,b){var a=0;if(d.offsetParent)for(;d.offsetParent;)a+=d.offsetTop,d=d.offsetParent;var e=0;if(b.offsetParent)for(;b.offsetParent;)e+=b.offsetTop,b=b.offsetParent;return a-e}var N="P DIV SPAN BLOCKQUOTE ADDRESS PRE A EM I STRONG B CITE OL UL LI".split(" "),h={},D=new F,s=null,K=null,J=0,L=[],y;if(f.styleSheets)for(var r=0;r<f.styleSheets.length;r++)(y=H(f.styleSheets[r]))&&L.push(y);else if(f.getElementsByTagName)for(var O=f.getElementsByTagName("link"),r=0;r<O.length;r++)(y=H(H(O[r])))&&L.push(y);G.when.apply(null,L).done(function(){for(var d in h)for(var b=G(d).map(function(){return this}),a=0;a<b.length;a++)a:{var e=b[a],j=h[d]["column-count"],c=h[d]["column-width"],i=h[d]["column-gap"],E=h[d]["column-rule"],m=void 0,m=void 0,q=0;if(e.clientWidth&&0!=e.clientWidth){var w=void 0;e.currentStyle?w=parseInt(e.currentStyle.paddingLeft.replace(/[\D]*/gi,""))+parseInt(e.currentStyle.paddingRight.replace(/[\D]*/gi,"")):f.defaultView&&f.defaultView.getComputedStyle&&(w=parseInt(f.defaultView.getComputedStyle(e,"").getPropertyValue("padding-left").replace(/[\D]*/gi,""))+parseInt(f.defaultView.getComputedStyle(e,"").getPropertyValue("padding-left").replace(/[\D]*/gi,"")));isNaN(w)&&(w=0);m=(e.clientWidth-w).toString()+"px"}else e.scrollWidth?(m=void 0,e.currentStyle?w=parseInt(e.currentStyle.paddingLeft.replace(/[\D]*/gi,""))+parseInt(e.currentStyle.paddingRight.replace(/[\D]*/gi,"")):f.defaultView&&f.defaultView.getComputedStyle&&(w=parseInt(f.defaultView.getComputedStyle(e,"").getPropertyValue("padding-left").replace(/[\D]*/gi,""))+parseInt(f.defaultView.getComputedStyle(e,"").getPropertyValue("padding-left").replace(/[\D]*/gi,""))),isNaN(w)&&(w=0),e.currentStyle?m=parseInt(e.currentStyle.borderLeftWidth.replace(/[\D]*/gi,""))+parseInt(e.currentStyle.borderRightWidth.replace(/[\D]*/gi,"")):f.defaultView&&f.defaultView.getComputedStyle&&(m=parseInt(f.defaultView.getComputedStyle(e,"").getPropertyValue("border-left-width").replace(/[\D]*/gi,""))+parseInt(f.defaultView.getComputedStyle(e,"").getPropertyValue("border-right-width").replace(/[\D]*/gi,""))),isNaN(m)&&(m=0),m=(e.scrollWidth-w-m).toString()+"px"):m="99%";var g=parseInt(m.replace(/[\D]*/gi,""));(m=!c||"auto"==c?m.replace(/[\d]*/gi,""):c.replace(/[\d]*/gi,""))||(m="px");i=i?parseInt(i.replace(/[\D]*/gi,"")):"%"==m?1:15;E&&"none"!=E&&(i=Math.floor(i/2),q=i+parseInt(E.substring(E.search(/\d/),E.search(/\D/))));if(!c||"auto"==c)c=(g-(i+q)*(j-1))/j;else if(c=parseInt(c.replace(/[\D]*/gi,"")),!j||"auto"==j)j=Math.floor(g/(c+i));var c=c-1,q=f.createElement("div"),k=e.parentNode,q=k.insertBefore(q,e),g=k.removeChild(e),g=q.appendChild(g);q.className=g.className;g.className="";g.id=D.randomId();g.style.width=c.toString()+m;"undefined"!=typeof g.style.styleFloat&&(g.style.styleFloat="left");"undefined"!=typeof g.style.cssFloat&&(g.style.cssFloat="left");c=Math.floor(g.offsetHeight/j)+14;q.id||(q.id=D.randomId());for(var t=1,e=1;e<j&&g&&t<j+5;e++)K=s=null,J=0,A(g,c*e,q),s&&!B(s)&&(c=C(s,q)+s.offsetHeight+10,e=1),t++;for(e=1;e<j&&g;e++){K=s=null;J=0;A(g,c,q);k=s&&B(s)&&g.id!=s.id?s:K;if(!k)break a;t=g.cloneNode(!1);t.id=D.randomId();g.parentNode.insertBefore(t,g.nextSibling);t.style.paddingLeft=i+m;E&&"none"!=E&&(t.style.borderLeft=E,g.style.paddingRight=i+m);f.all&&!M.opera&&(g.style.height=c+"px");g.style.minHeight=c+"px";v(k,g,t,"append");for(var p=k;p&&p.id!=g.id;){for(var n=p.nextSibling;n;){var x=n,n=t,r=v(x,g,n,"append"),x=r.appendChild(x.parentNode.removeChild(x));r.id==n.id&&1==x.nodeType&&(x.style.paddingTop="0px",x.style.marginTop="0px");n=p.nextSibling}p=p.parentNode}for(var p=k,n=c-C(k,q),r=g,x=t,u=p.lastChild;u;){if(3==u.nodeType){for(var l="dummmy",y="";p.offsetHeight>n+2&&""!=l;){for(l=u;l&&3!=l.nodeType;)l=l.firstChild;if(l){var z=l.parentNode,F=z.offsetHeight;if(F){for(var H=l.nodeValue,I=l.nodeValue.lastIndexOf(" ");-1!=I&&z.offsetHeight==F;)l.nodeValue=l.nodeValue.substr(0,I),I=l.nodeValue.lastIndexOf(" "),-1==I&&(I=l.nodeValue.lastIndexOf("\n"));z.offsetHeight==F&&(l.nodeValue="");l=H.substr(l.nodeValue.length)}else l=""}else l=void 0;y=l+y}""!=y&&(z=v(u,r,x,"insertBefore"),z.insertBefore(f.createTextNode(y),z.firstChild));if(""==u.nodeValue)u.parentNode.removeChild(u);else break}else z=v(u,r,x,"insertBefore"),z.insertBefore(u.parentNode.removeChild(u),z.firstChild);u=p.lastChild}p=l;for(k=k.parentNode;k&&k.id!=g.id;){for(n=k.firstChild;n;)1==n.nodeType&&0==n.childNodes.length||3==n.nodeType&&""==n.nodeValue.replace(/[\u0020\u0009\u000A]*/,"")?(k.removeChild(n),n=k.firstChild):n=n.nextSibling;k=k.parentNode}if(p&&((k=g.lastChild)&&f.defaultView&&"justify"==f.defaultView.getComputedStyle(k,"").getPropertyValue("text-align")||k.currentStyle&&"justify"==k.currentStyle.textAlign))g=f.createTextNode(" "+p.replace(/./g,"\u00a0")),p=f.createElement("span"),k.appendChild(p),p.style.lineHeight="1px",p.appendChild(g);g=t}g&&(f.all&&!M.opera&&(g.style.height=c+"px"),g.style.minHeight=c+"px");j=f.createElement("div");j.style.clear="left";j.appendChild(f.createTextNode(" "));q.appendChild(j);navigator.userAgent.toLowerCase().indexOf("safari")+1&&(q.innerHTML+=" ")}})}})(jQuery,window,window.document);